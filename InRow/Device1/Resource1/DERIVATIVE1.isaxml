<?xml version="1.0" encoding="utf-8"?>
<Pou FileVersion="200.00.003" Name="DERIVATIVE1" ElementGuid="f0ae81d5-d94b-499e-b9dc-97765aae1023" Comment="{\rtf1\ansi\ansicpg1252\uc1\htmautsp\deff2{\fonttbl{\f0\fcharset0 Times New Roman;}{\f2\fcharset0 Arial;}}{\colortbl\red0\green0\blue0;\red255\green255\blue255;}\loch\hich\dbch\pard\plain\ltrpar\itap0{\lang1033\fs18\f2\cf0 \cf0\ql{\f2 {\lang1040\ltrch EN}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\lang1040\ltrch This function approximates the derivative with the angular coefficient of the interpolating line the last 5 sampled points of the input signal XIN: linearize the input signal and consider the derivative of the linearized signal.}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\lang1040\ltrch Taking into account that sampling takes place in the program cycle, we avoid defining a constant cycle time for all the samples and instead consider the current time given by the specific system variable.}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\lang1040\ltrch Then the associated time is read by the system, so the point pairs are (ti, XINi), i = 3,2,1 plus the current point (t, XIN).}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\lang1040\ltrch Note:}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\lang1040\ltrch In carel PLCs the sampling time is never constant. This function allows you to estimate the derivative even in these conditions without introducing errors and / or noise due to sampling.}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\lang1040\ltrch Quote:}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\lang1040\ltrch The estimation of the angular coefficient of linearization of the input signal is performed according to the least squares method: see for example}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\lang1040\ltrch \~\~\~\~&quot;Error theory and data analysis&quot;, S.Ciampolillo, Ed. Progetto (Padova), pag. 83}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\lang1040\ltrch }\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\lang1040\ltrch IT}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\ltrch Questa funzione approssima la derivata con il coefficiente angolare della retta interpolante gli ultimi}{\lang1040\ltrch  }{\ltrch 5 punti campionati del segnale in ingresso XIN: linearizzo il segnale in ingresso e considero la derivata del segnale linearizzato.}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\ltrch Tenendo conto che il campionamento avviene a ciclo di programma, evitiamo di definire un tempo di ciclo costante per tutti i campioni e consideriamo invece il tempo attuale dato dalla apposita variabile di sistema. }\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\ltrch Quindi il tempo associato viene letto dal sistema, per cui le coppie di punti sono (ti, XINi), i = 3,2,1 pi\'f9 il punto attuale (t, XIN). }\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\ltrch Nota: }\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\ltrch Nelle PLC carel il tempo di campionamento non \'e8 mai costante. Questa funzione permette di stimare la derivata anche in queste condizioni senza introdurre errori e/o rumore dovuti al campionamento. }\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\ltrch Citazione: }\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\ltrch La stima del coefficiente angolare della linearizzazione del segnale in ingresso \'e8 eseguita secondo il metodo dei minimi quadrati: vedi per esempio }\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;{\f2 {\ltrch     &quot;Teoria degli errori e analisi dei dati&quot;, S.Ciampolillo, Ed. Progetto (Padova), pag. 83}\li0\ri0\sa0\sb0\fi0\ql\par}&#xD;&#xA;}&#xD;&#xA;}" SingleTextLine="Numerical calculation of the derivative of the XIN signal for points sampled over time." Language="ST" CustomFbd="0" Localization="Prj" GroupName="(User defined)" Password="E4BDBA2BEF6CC4DC" GenDebugInfo="false" UseResPassword="true" GenerateSymbMon="true" Is1499="false">
  <FunctionBlock IdentifierNb="0" Keyword="" InitInstance="false" SymbMonExtraBytes="128" />
  <LocalVars>
    <Variable Name="RUN" DataType="BOOL" InitialValue="" Comment="0 - Reset, 1 - Compute derivative" Address="" Modifier="Constant" Kind="VarInput" Alias="" AccessRights="Read" StringSize="0" Direction="Input" CommentFields="" Attributes="0" />
    <Variable Name="XIN" DataType="REAL" InitialValue="" Comment="Input for derivative" Address="" Modifier="Constant" Kind="VarInput" Alias="" AccessRights="Read" StringSize="0" Direction="Input" CommentFields="" Attributes="0" />
    <Variable Name="XOUT" DataType="REAL" InitialValue="" Comment="Derivative output" Address="" Modifier="Constant" Kind="VarOutput" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Output" CommentFields="" Attributes="0" />
    <Variable Name="X1" DataType="REAL" InitialValue="" Comment="Previous input signal sample -1" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="X2" DataType="REAL" InitialValue="" Comment="Previous input signal sample -2" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="X3" DataType="REAL" InitialValue="" Comment="Previous input signal sample -3" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="X4" DataType="REAL" InitialValue="" Comment="Previous input signal sample -4" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="t1" DataType="TIME" InitialValue="" Comment="Time for previous input sample X1" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="t2" DataType="TIME" InitialValue="" Comment="Time for previous input sample X2" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="t3" DataType="TIME" InitialValue="" Comment="Time for previous input sample X3" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="t4" DataType="TIME" InitialValue="" Comment="Time for previous input sample X4" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="t" DataType="TIME" InitialValue="" Comment="Actual time (msec)" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="t_1" DataType="REAL" InitialValue="" Comment="Tempo relativo a X1 riscalato su t4" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="t_2" DataType="REAL" InitialValue="" Comment="Tempo relativo a X2 riscalato su t4" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="t_3" DataType="REAL" InitialValue="" Comment="Tempo relativo a X3 riscalato su t4" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="t_4" DataType="REAL" InitialValue="" Comment="Tempo relativo a X4 riscalato su t4" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="t_0" DataType="REAL" InitialValue="" Comment="Tempo attuale riscalato su t4" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="Sum_X" DataType="REAL" InitialValue="" Comment="SUM of Xi" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="Sum_X2" DataType="REAL" InitialValue="" Comment="SUM of Xi^2" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="Sum_t" DataType="REAL" InitialValue="" Comment="SUM of ti" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="Sum_t2" DataType="REAL" InitialValue="" Comment="SUM of ti^2" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="Sum_Xt" DataType="REAL" InitialValue="" Comment="SUM of Xi * ti" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
    <Variable Name="DELTA" DataType="REAL" InitialValue="" Comment="5 Sum_t2 - (Sum_t)^2" Address="" Modifier="Constant" Kind="Var" Alias="" AccessRights="ReadWrite" StringSize="0" Direction="Local" CommentFields="" Attributes="0" />
  </LocalVars>
  <PouBody><![CDATA[gFQnV1NbWi9dZGUTZGofaWwxMzU3g1NLR1dLTk4ehklLQEkhRASWTFJCVkhWBPUIDisoIUUPyQ9cTFdVIHzkQUFRS1dBFY1TQTIiWlIUiikkW0tPXUzOS3FuZ3NpIqVpJGBjbWM0qGRwam1vIC6iJXBrZyFkJLZscmJ2aHYk5GpiI3ZpZWGcTEojcWhnL6VpJGVtcyAxq2xqd3EhcyCpdWhmZiFvN6F3JHdrbGVvyQ9Qa2tyICexa2d3a25uYaV1dHFteWkspXFhcCJ1aCTkYWFxa3dhNa1zYSN1aHQp5HFsZiJgbiaxaWVxImJvJKJjbWBrZG415GpiI3ZpZWGta3BmcHFvLaVxbW1lIXM1tmRtZGp1IC2ta2EjdmllYahkd3cibm4ktwgONiJyYSy0aWFnInFvKKpxdyNtZyA1rGAkamxxdTXkdm1kbGBsYZxMSjkibWkvoWR2anhkIDWsYCRqbHF1NeR2bWRsYGxhpWtgI2FubjKtYWFxInVoJORhYXFrd2E1rXNhDghuZmGwbWEjbmhuJKV3bXlnZSAyrWJqYm4vDUuQZG9qbGYgKKpxayNjYmMusWtwI3ZpYTXkdmVucm1pL6MlcGJpZHNhtGllYGchaS/kcWxmInFyLqN3ZW4iYnkiqGAoI3VkICCyam1nImVlJ61rbW1lIWFhp3xnb2chdCipYAkJYW5uMrBkanciZ28z5GRobyJyYSy0aWFwImBuJeRsanB2ZGEl5GZrbXFoZCS2JXBrZyFjNLZ3YW12IXQoqWAkZGt3ZS/kZ30jdmllYaV1dHFtcXIopXFhI3RgciilZ2hmIm5mTM52fXB2ZG1vyQ9Qa2dvIDWsYCRicXJvIq1kcGZmIXQoqWAkanEhciSlYSRheyF0KaEld3pxdWUs6CV3bCJ1aCTkdWVqcHIgLqIldGxrb3Qy5GR2ZiIpdCjoJVxKTGgpbeRsJD4iMixz6DQJCXJtdTLkcWxmImJ1M7ZgancicW8oqnEkK3YtIBmNSy0tDwsqaMkPCQkPCyhr5ExQDghZTxSQJTkjRkRSCJJEUEpURDEallBKLyJZSQ+ZCA5AY21jLqhqJG13bGUzrWZrI2ZkbC2lJWBmcGh2ILBkJGdnbSAyoWJqYm5kIBmNSyRzZ3MgMbFrcGoiYmEstGxrbWN1aWGqYGgjdmRtMasrJA4IUHUkt3FlI2R0bjutampmImBwMbZqd3BrbGFhqGQkZ2dzaTelcWUjYW5uYa1pJGBtZGYnrWZtZmx1ZWGla2NsbmByJORhYW9uYCAzoXFwYiJobjWhd3RsbmBuNaElY29rIXUtsGxpag8LNWG0cGp3ayFjIKl1bWxsYHQo5GFhbyJyZSaqZGhmImhuYa1rY3FncnMu5F1NTTghbCiqYGVxa3t6LuRsaCNxZGcvpWlhI2tvICiqYnZmcXJvYaElZ2xscmkloXdrI25gICWhd211Y3VhYckPYGZuIXMko2tlb2chbCiqYGVxa3t6ILBqKg4IVWUvoWtgbCJiby+waiRgamQgKKglZ2JvcWkuqmRpZmx1b2Glc3JqZ29lYaUlZ2phbW9hoGwkc3BuZzOlaGliLiFlN61xbWJvbiAlrSVgZmRobii2YCR2bCF0JKl1ayNmaCAirWZobCIMCiKrdnBibHVlYbRgdiN2dHQ1rSVtI2FgbTGtampqImQgIqtrd2pmZHIopWhrI2tvdiSnYCRqbiF0JKl1ayNjdXQ0pWlhI2ZgdC7kYWVvbmAgILR1a3BrdWFhsmR2amNjaS2hJWBqIgwKMq12cGZvYC5hyQ9VdmtvZCjkbGgjdmRtMaslZXBxbmMopXFrI3RoZS+hJWhmdnVvYaBkaCNxaHM1oWhlLyJxZTPkZnFqIm1lYadqdHNrZCAlrSV0dmx1aWG3ampsIil0KOglXEpMaClt5GwkPiIyLHPoNCQOCHFpgn0lbW8icXUvsGokYnZ1dSCoYCQrdi0gGY1LLS0iDApMzktrd2M7IEzOS2FvbmQgEYhGJGBjc2Ut5GxoI3ZkbTGrJWBqImJhLLRsa21jbGUvsGokbW1vIIJsJWliayFjLrdxZW12ZC5hlXBhcHZgICexa35qbW9lYbRgdm5ndXQk5GFtI3F1aSyld2EjbmAgTM5hYXFrd2E1pSVlbWFpZWGtayRyd2RzNaElZ2xsZWk7rWpqaiJyZS++ZCRqbHVyLqBwdnFnIWUztmp2aiJkLy7kd3FubXNlYaBqcnZ2aCAgqCVnYm9xaS6qZGlmbHVvb+QIDg4IQmk1pX9tbGxkOmHJD0hiInJ0KKlkJGdnbSAiq2BiZWtiaSSqcWEjY29nLqhkdmYiZWUtqGQkb2tvZSC2bH55Y3tpLqpgJGdnbSAyoWJqYm5kICiqJW1tZXNlMrdqJMCqIWUyoWJxanZgIDKhZmttZm4gKKglCQlvZHQuoGokZ2doICyta21uayFxNKVhdmJ2aDphsmBgaiJxZTPkYHdmb3FpLuQIDiMiISBjkGBrcWtgICWhYmhqImRyM6t3bSNnIWEvpWltcGshZCStJWBidmgibeRWKkBrYG0xq2ltb25uLGGBYSojUnNvJqFxcGwiKVAgoGpyYistIDGlYiojOjINS+4sCQkPC3Rh5D85I11eUxiXU0VcQVhDDYFBRVdHOglp7kRnd3dgbGGta213a2BsYad8Z29nIXQoqWAkK29yKWvtCA4OCEhGYZZQSiNWSUUPyQ8kIyIhKGvkTFAOCCEgYeQlJCNQaHMipWllbmdvdC7kYWFqInVlLLRsJGIidTRhoSVnbGx3ZTO3bGttZyFpL+R2YWBtb2Qo5AgOIyIhIGHkJUEkIk9FAoFWV0JQSE9htGB2I2d3aTWld2EjcHRtLrZgJG1nbWwg5GFhcWt3YTWlJXd2InVlLLRsJG93b2cprSUuKg8LCUzODCwpIkROTM4MJCMiU2Uiq3NhcXshbyfkcWxmInVpLKF2JHdtIXR15GRqZyJiby+yYHZwa25uYa1rJHBnYm8voHYkDgjDoINkx6TBoiEgYY1RJEpRIU4Eh0BXUENTWWGwaiRidG5pJeRra2pxZCAoqiVwa2chZCS2bHJidmh2JORqaiNubm4m5HFtbmdyIGvtCA4jIiEgNZsxJDk/IUEPnVpQTF1TRQCILXA3IiwgNfAsJCwiMDBx9Cs0OA8LIGHkJXBcMSE6fORESlpdVU8elkBFTyp1M2HpJXA3KyEvYfU1NDMsMTtMziUkIyJ1X3PkPzkjQ09ZHpBKW1FHQExpsDckLiJ1NGjkKiQyMjEwb/Q+CQkiISBhsFo1Izg8IACKXFtXTV5SBIVJLHczIS1hsDEtIy0hMXH0NSozOQwKYeQlJHddMSB7+SVFTVteVA6bV0FCTil0YeklcDcrISBu5DQ0MzIvMHrJDyQjIiFTNKlaXCMiOz1hnDQkKCJZMmHvJVwwIiogGfAlLyNaSE56yQ8kIyIhUzSpWlwxIjs9YZw0JCkiWTFh7yVcMSIrIBn2JS8jWjIga+RdNyMpIVh15C8kWzYhK2GcTEojKCFYCIo+CQkiISBhl3BpXHYhIHv5JXBcMyErYbBaNiMpIXQe9yUvI3ZeNGHvJXBcMjoNS+QlJCNRdG0esDckOT8hdB71JS4jdl4xYe8lcFwwISphsFo2IykhdB73JS4jdl4zYe8lcFw2ISphsFowIykhdB70JS4jdl4weskPJCMiIVM0qVpcdyI7PWGcNCQpInVfcOQuJFswISphsFo2IykhWHLkLyR3XTIgauRdMCMoIXQe8CUvI1pITmHuJXBcMjoNS+QlJCNGREwVhSUkOT8hNW/0JS4jUXRtHrA3JC4iKVM0qVpwIyghUzSpWnAqOQwKYeQlJEpEIUQEiFFFIz8hMG/0JVBLR08gBYFJUEIiOz1h9Ss0OCJETgWbTEI4IgwKYeQlJFtNVFRh/jgkKzcvMGHuJVd2b15YNeQoJFB3bF815C8kUHdsXxntJSsjRkRMFYU+CQkiISBhnDEkOT8hWHL/CA4jIiEgGfclPj4iWTJ6yQ8NWzAhOnzkXTU4DwsJGfUlPj4iWUkP/wgOIyIhIDXwJT4+InUzeskPJCMiIXRy5D85I3YzO0zOJSQjInUyYf44JHczOg1L5CUkI3YwIHv5JXA4DwtFDZdACQkLKSphlkBXRlYhKmjkCA4KWk5VFeQ/OSMyLzB65AgOClowIHv5JVxKTDoNS81dNiM4PCAZjUs/DggIWHLkPzkjWkhOeskPJCMiIVh15D85I1pITnrJDyQjIiF0cOQ/OSN2Og1L5CUkI3YzIHv5JXA4DwsgYeQlcDAiOz1hsD4JCSIhIGGwMSQ5PyF0eskPQU1GXkkH/wgORkxFXweRS0dXS05OHoZJS0BJ]]></PouBody>
  <PouUIProperties><![CDATA[PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxSb290IFZlcnNpb249IjciPg0KICA8TGFuZ3VhZ2VDb250YWluZXJTdHlsZSBDb21tZW50VGV4dENvbG9yPSJHcmVlbiIgQ29tbWVudEZvbnQ9IkNvdXJpZXIgTmV3LCAxMHB0IiBQb25jdHVhdGlvblRleHRDb2xvcj0iQmxhY2siIFBvbmN0dWF0aW9uRm9udD0iQ291cmllciBOZXcsIDEwcHQiIElkZW50aWZpZXJUZXh0Q29sb3I9IkJsYWNrIiBJZGVudGlmaWVyRm9udD0iQ291cmllciBOZXcsIDEwcHQiIE9wZXJhdG9yVGV4dENvbG9yPSJCbGFjayIgT3BlcmF0b3JGb250PSJDb3VyaWVyIE5ldywgMTBwdCIgUmVzZXJ2ZWRXb3JkVGV4dENvbG9yPSJCbHVlIiBSZXNlcnZlZFdvcmRGb250PSJDb3VyaWVyIE5ldywgMTBwdCIgUG91VGV4dENvbG9yPSJCbHVlVmlvbGV0IiBQb3VGb250PSJDb3VyaWVyIE5ldywgMTBwdCIgTnVtYmVyVGV4dENvbG9yPSJEYXJrUmVkIiBOdW1iZXJGb250PSJDb3VyaWVyIE5ldywgMTBwdCIgU3RyaW5nVGV4dENvbG9yPSJEYXJrUmVkIiBTdHJpbmdGb250PSJDb3VyaWVyIE5ldywgMTBwdCIgRWRpdG9yVGV4dEFyZWFCYWNrZ3JvdW5kQ29sb3I9IldoaXRlIiBFZGl0b3JGb250PSJDb3VyaWVyIE5ldywgMTBwdCIgSW5kZXg9IjAiIC8+DQo8L1Jvb3Q+]]></PouUIProperties>
</Pou>